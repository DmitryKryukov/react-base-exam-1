(()=>{"use strict";var e={99:(e,t,a)=>{a.d(t,{Z:()=>s});var o=a(81),n=a.n(o),r=a(645),i=a.n(r)()(n());i.push([e.id,'html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:rgba(0,0,0,0)}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-0.25em}sup{top:-0.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}button,[type=button],[type=reset],[type=submit]{-webkit-appearance:button}button::-moz-focus-inner,[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner{border-style:none;padding:0}button:-moz-focusring,[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}template{display:none}[hidden]{display:none}body{font-family:"Roboto Flex",sans-serif;font-optical-sizing:auto;font-variation-settings:"slnt" 0,"wdth" 100,"GRAD" 0,"XOPQ" 96,"XTRA" 468,"YOPQ" 79,"YTAS" 750,"YTDE" -203,"YTFI" 738,"YTLC" 514,"YTUC" 712}:root{--background-body: #f2f2f2;--background-base: #fff;--background-card: #ededed;--background-ghost: #f2f2f2;--foreground-body: #000;--foreground-muted: #808080;--foreground-inverted: #fff;--accent-primary: #00A31B;--accent-primary: color(display-p3 0 0.64 0.1067);--accent-danger: #FF7033;--accent-danger: color(display-p3 1 0.44 0.2);--modal-overlay: #000000CC;--container-padding: 16px;--ease-out-quint: cubic-bezier(0.22, 1, 0.36, 1)}@media(prefers-color-scheme: dark){:root{--background-body: #000;--background-base: #131313;--background-card: #212121;--background-ghost: #303030;--foreground-body: #fff;--foreground-inverted: #000;--accent-primary: #C9FF00;--accent-primary: color(display-p3 0.8333 1 0);--accent-danger: #CC3D00;--accent-danger: color(display-p3 0.8 0.24 0)}}*{box-sizing:border-box;outline:none}h1,h2,h3,h4,h5,h6{margin:0}html{transition:background-color var(--ease-out-quint) .3s}html:has(.modal-wrapper--open){background-color:var(--modal-overlay)}html,body{scrollbar-gutter:stable;color-scheme:light}@media(prefers-color-scheme: dark){html,body{color-scheme:dark}}body{display:flex;flex-direction:column;min-height:100lvh;background-color:var(--background-body);color:var(--foreground-body);font-size:24px;line-height:1;overflow-x:hidden}body:has(.modal-wrapper--open){overflow:hidden}input{font-family:inherit}textarea{resize:none}.button{position:relative;display:flex;background-color:rgba(0,0,0,0);border:none;cursor:pointer;padding:0;border-radius:12px}.button--add-task{position:sticky;top:0;width:100%;padding:16px 48px 16px 16px;background-color:var(--background-base);color:var(--accent-primary);text-align:left;border-radius:28px 28px 0 0;z-index:1;box-shadow:0 -32px 0 var(--background-body);border-bottom:1px solid var(--background-ghost)}.button--add-task:hover,.button--add-task:focus{background-color:var(--background-card)}.button--task-delete{margin-right:8px;opacity:.5;transition:opacity var(--ease-out-quint) .3s}.button--task-delete:hover{opacity:1;transition:none}.button__icon--right{position:absolute;right:12px}.button__icon--plus{margin-top:-2px}.button--primary{justify-content:center;padding:12px 32px;background-color:var(--accent-primary);color:var(--foreground-inverted);transition:filter .3s var(--ease-out-quint)}.button--primary:hover,.button--primary:focus{transition:none;filter:brightness(0.8) contrast(1.2)}.button--wide{width:100%}.input{font-family:inherit;padding:6px 8px 6px 0;background-color:var(--background-card);color:var(--foreground-body);border-radius:12px;border:none;text-indent:8px;transition:background-color .3s var(--ease-out-quint)}.input:focus{transition:none;background-color:var(--background-ghost)}.input::placeholder{color:var(--foreground-muted);opacity:1}.input--textarea{text-indent:initial;padding:6px 8px;scrollbar-width:thin}.input--error{outline:1px solid var(--accent-danger)}.checkbox{display:flex;justify-content:center;align-items:center;appearance:none;width:24px;height:24px;background-color:var(--background-ghost);border-radius:8px;cursor:pointer}.checkbox:checked{background-color:var(--accent-primary);box-shadow:0 0 18px -6px var(--accent-primary)}.checkbox:checked::after{content:"✓";color:var(--foreground-inverted)}.toggle__lable{display:flex;align-items:center;gap:4px;flex:1}.toggle{position:relative;appearance:none;width:56px;height:32px;border-radius:16px;background-color:var(--background-ghost)}.toggle:after{position:absolute;display:block;top:2px;left:2px;content:"";width:28px;height:28px;background-color:var(--foreground-muted);border-radius:50%;transition:translate var(--ease-out-quint) .3s}.toggle:checked{background-color:var(--accent-primary)}.toggle:checked:after{translate:24px 0;background-color:var(--foreground-inverted)}.chip__input{appearance:none;display:none}.chip{padding:6px 8px;background-color:var(--background-base);border-radius:12px;cursor:pointer}.chip:hover{background-color:var(--background-card)}.chip:has(.chip__input:checked){background-color:var(--background-ghost);cursor:initial}.main-header{display:flex;justify-content:space-between;align-items:center;gap:12px;padding:12px 24px 12px 12px;z-index:2}@media(max-width: 1150px){.main-header{flex-direction:column;padding:12px 12px 0}}.main-header__user-wrapper{display:flex;align-items:center;gap:8px;color:var(--accent-primary)}@media(max-width: 1150px){.main-header__user-wrapper{display:none}}.main-header__user-name{margin-bottom:4px}.main-header__filter-wrapper{position:absolute;display:flex;flex-direction:column;left:calc(50% - 250px);width:min(500px,100%);align-self:start}@media(max-width: 1150px){.main-header__filter-wrapper{position:relative;left:initial;align-self:initial}}.main-header__search-wrapper{position:relative}.main-header__search-wrapper:after{content:"";position:absolute;display:flex;width:40px;height:100%;top:0;right:56px;background-color:var(--background-base);mask-image:linear-gradient(90deg, transparent, white);pointer-events:none;transition:background-color var(--ease-out-quint) .3s}.main-header__search-wrapper:has(.main-header__search:focus):after{background-color:var(--background-card);transition:none}.main-header__search-wrapper .icon--search{position:absolute;top:calc(50% - 12px);right:16px}.main-header__search{width:100%;padding:12px 56px 12px 0;text-indent:16px;background-color:var(--background-base);text-overflow:clip}.main-header__search:focus{background-color:var(--background-card)}.main-header__status-filter-wrapper{overflow:auto;margin-left:-12px;margin-right:-12px;padding-left:12px;padding-right:12px}.main-header__status-filter-set{display:flex;gap:8px;padding:8px 0;margin:0;border:none}.main-content-wrapper{display:flex;justify-content:center;flex:1;padding:44px 12px 0}@media(max-width: 1150px){.main-content-wrapper{padding-top:0}}.main-content{display:flex;flex-direction:column;width:min(500px,100%);min-height:100%;background-color:var(--background-base);border-radius:28px 28px 0 0}.task-wrapper{display:flex;flex-direction:column-reverse;justify-content:start;padding:0;margin:0;flex:1}.task{--task-foreground-color: var(--foreground-body);position:relative;display:flex;gap:8px;list-style:none;padding:16px;color:var(--task-foreground-color);transition:background-color var(--ease-out-quint) .3s;cursor:pointer}.task:not(:first-child){border-bottom:1px solid var(--background-ghost)}.task:not(.task--zero):hover{background-color:var(--background-card);transition:none}.task:not(.task--zero):hover .task-actions{pointer-events:initial;opacity:1}.task--overdue::after{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background-color:var(--accent-danger);opacity:.1;pointer-events:none}.task:has(.checkbox:checked){--task-foreground-color: var(--foreground-muted)}.task:has(.checkbox:checked) .task__title{text-decoration:line-through;text-decoration-thickness:2px;text-decoration-color:var(--accent-danger)}.task:has(.checkbox:checked) .task-due-date{opacity:.5}.task-info{display:flex;flex-direction:column;gap:8px;flex:1}.task__title{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;overflow:hidden;font-size:24px;font-weight:400;line-height:1.1}.task__description{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:5;overflow:hidden}.task__description,.task__created-at,.task-due-date{font-size:16px}.task-date-wrapper{display:flex;flex-direction:column;gap:8px}.task__created-at{color:var(--foreground-muted)}.task-due-date{display:flex;gap:2px;color:var(--accent-danger)}@media(pointer: fine){.task-actions{pointer-events:none;opacity:0}}.task--zero{display:flex;flex-direction:column;justify-content:center;align-items:center;padding:12px 16px 16px;flex:1;gap:16px;color:var(--foreground-muted);cursor:initial}.task--zero .task__title{margin-top:-4px}.modal-wrapper{position:fixed;display:flex;justify-content:center;align-items:end;width:100vw;height:100lvh;z-index:3;pointer-events:none;overflow:hidden}.modal-wrapper--open{pointer-events:initial}.modal-wrapper--open .modal-wrapper__overlay{background-color:var(--modal-overlay)}.modal-wrapper--open .modal{translate:0 0}.modal-wrapper__overlay{position:absolute;width:100%;height:100%;background-color:rgba(0,0,0,0);z-index:-1;transition:all .3s var(--ease-out-quint);cursor:pointer}.modal{display:flex;flex-direction:column;padding:0 16px;width:min(560px,100%);height:calc(100lvh - 200px);background-color:var(--background-base);border-radius:28px 28px 0 0;overflow:hidden;translate:0 100%;transition:translate .3s var(--ease-out-quint)}.modal-header{position:relative;display:flex;margin-right:-14px;padding-top:16px;padding-bottom:16px;align-items:center}.modal__title{flex:1;font-size:24px;line-height:1;font-weight:500}.modal__close{position:absolute;right:0;display:flex;padding:16px;background-color:rgba(0,0,0,0);border:none;border-radius:50%;cursor:pointer}.modal__close:hover,.modal__close:focus{background-color:var(--background-body)}.modal-content{display:flex;flex-direction:column;gap:16px}.modal-content-group{display:flex;flex-direction:column;gap:4px;padding:0;margin:0;border:none}.modal-content-toogle-group{display:flex;align-items:center;margin-bottom:8px}.modal-footer{display:flex;align-items:end;height:100%;padding-bottom:16px}.modal-footer__shortcut{position:absolute;right:32px;bottom:30px;pointer-events:none}.icon--deadline{scale:1.25}.hide{display:none}',""]);const s=i},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var a="",o=void 0!==t[5];return t[4]&&(a+="@supports (".concat(t[4],") {")),t[2]&&(a+="@media ".concat(t[2]," {")),o&&(a+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),a+=e(t),o&&(a+="}"),t[2]&&(a+="}"),t[4]&&(a+="}"),a})).join("")},t.i=function(e,a,o,n,r){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(o)for(var s=0;s<this.length;s++){var d=this[s][0];null!=d&&(i[d]=!0)}for(var l=0;l<e.length;l++){var c=[].concat(e[l]);o&&i[c[0]]||(void 0!==r&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=r),a&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=a):c[2]=a),n&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=n):c[4]="".concat(n)),t.push(c))}},t}},81:e=>{e.exports=function(e){return e[1]}},273:(e,t,a)=>{a.r(t),a.d(t,{default:()=>v});var o=a(379),n=a.n(o),r=a(795),i=a.n(r),s=a(569),d=a.n(s),l=a(565),c=a.n(l),p=a(216),u=a.n(p),h=a(589),f=a.n(h),m=a(99),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=d().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=u(),n()(m.Z,g);const v=m.Z&&m.Z.locals?m.Z.locals:void 0},379:e=>{var t=[];function a(e){for(var a=-1,o=0;o<t.length;o++)if(t[o].identifier===e){a=o;break}return a}function o(e,o){for(var r={},i=[],s=0;s<e.length;s++){var d=e[s],l=o.base?d[0]+o.base:d[0],c=r[l]||0,p="".concat(l," ").concat(c);r[l]=c+1;var u=a(p),h={css:d[1],media:d[2],sourceMap:d[3],supports:d[4],layer:d[5]};if(-1!==u)t[u].references++,t[u].updater(h);else{var f=n(h,o);o.byIndex=s,t.splice(s,0,{identifier:p,updater:f,references:1})}i.push(p)}return i}function n(e,t){var a=t.domAPI(t);return a.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;a.update(e=t)}else a.remove()}}e.exports=function(e,n){var r=o(e=e||[],n=n||{});return function(e){e=e||[];for(var i=0;i<r.length;i++){var s=a(r[i]);t[s].references--}for(var d=o(e,n),l=0;l<r.length;l++){var c=a(r[l]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}r=d}}},569:e=>{var t={};e.exports=function(e,a){var o=function(e){if(void 0===t[e]){var a=document.querySelector(e);if(window.HTMLIFrameElement&&a instanceof window.HTMLIFrameElement)try{a=a.contentDocument.head}catch(e){a=null}t[e]=a}return t[e]}(e);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(a)}},216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,a)=>{e.exports=function(e){var t=a.nc;t&&e.setAttribute("nonce",t)}},795:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(a){!function(e,t,a){var o="";a.supports&&(o+="@supports (".concat(a.supports,") {")),a.media&&(o+="@media ".concat(a.media," {"));var n=void 0!==a.layer;n&&(o+="@layer".concat(a.layer.length>0?" ".concat(a.layer):""," {")),o+=a.css,n&&(o+="}"),a.media&&(o+="}"),a.supports&&(o+="}");var r=a.sourceMap;r&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),t.styleTagTransform(o,e,t.options)}(t,e,a)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},604:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InterfaceManager=void 0;var o=a(901),n=a(781),r=function(){function e(){this.intervalId=null,this.init()}return e.prototype.init=function(){var e=this;this.taskWrapperNode=document.querySelector("#js-task-wrapper");var t=document.querySelector("#js-add-new-task-button");this.searchTaskInput=document.querySelector("#js-input-main-search"),this.searchStatusValue="",this.renderStateFilters(),t.addEventListener("click",(function(){return e.dispatchOpenTaskModal()})),this.searchTaskInput.addEventListener("input",(function(t){return e.dispatchSearchInputEvent(t)})),this.searchStatusInputs.forEach((function(t){t.addEventListener("change",(function(t){return e.dispatchUpdateSearchStatus(t)}))}))},e.prototype.dispatchOpenTaskModal=function(){var e=new CustomEvent("openTaskModal",{detail:{task:null}});document.dispatchEvent(e)},e.prototype.dispatchSearchInputEvent=function(e){var t=new CustomEvent("searchInput",{detail:{searchValue:this.searchTaskInput.value,status:this.searchStatusValue}});document.dispatchEvent(t),e.stopPropagation()},e.prototype.dispatchUpdateSearchStatus=function(e){this.searchStatusValue=e.target.value,this.dispatchSearchInputEvent(e)},e.prototype.renderStateFilters=function(){var e=document.querySelector("#js-status-filter-set"),t=document.querySelector("#template-status-filter");if(t){var a=Object.keys(o.TaskStatus);e.innerHTML="";var n=function(e,a,o){void 0===o&&(o=!1);var n=document.importNode(t.content,!0),r=n.querySelector(".chip__input"),i=n.querySelector(".chip__text");return r.value=e,r.checked=o,i.textContent=a,n};e.append(n("","Все",!0)),a.forEach((function(t){var a=o.statusLabels[o.TaskStatus[t]]||t;e.append(n(o.TaskStatus[t],a))})),this.searchStatusInputs=document.querySelectorAll(".filter-status-input")}},e.prototype.renderZeroState=function(){var e=document.querySelector("#template-task-zero-state"),t=document.importNode(e.content,!0),a=t.querySelector(".task__title");(this.searchTaskInput.value||""!==this.searchStatusValue)&&(a.textContent="Ничего не нашлось"),this.taskWrapperNode.innerHTML="",this.taskWrapperNode.append(t)},e.prototype.renderTasks=function(e){var t=this;if(this.taskWrapperNode.innerHTML="",clearInterval(this.intervalId),e&&0!==e.length){var a=document.querySelector("#template-task");e.forEach((function(e){return t.renderTask(e,a)})),this.intervalId=setInterval((function(){t.renderTasks(e)}),6e4)}else this.renderZeroState()},e.prototype.renderTask=function(e,t){var a=document.importNode(t.content,!0),r=a.querySelector(".task__title"),i=a.querySelector(".task__description"),s=a.querySelector(".task__created-at"),d=a.querySelector("#checkbox-task-status"),l=a.querySelector(".button--task-delete"),c=a.querySelector(".task-due-date"),p=a.querySelector(".task");r.textContent=e.title,i.textContent=e.description||"",e.description||i.remove(),c.querySelector(".task-due-date__text").textContent=e.dueDate?(0,n.relativeTimeFormat)(e.dueDate):"",e.dueDate?p.classList.toggle("task--overdue",!(0,n.isBeforeNow)(e.dueDate)):c.remove(),s.textContent=(0,n.relativeTimeFormat)(e.createdAt),d.checked=e.status===o.TaskStatus.Closed,p&&(p.dataset.id=e.id,this.addTaskEventListeners(p,d,l,e),this.taskWrapperNode.append(a))},e.prototype.addTaskEventListeners=function(e,t,a,n){e.addEventListener("click",(function(e){if(e.target!==t&&e.target!==a){var o=new CustomEvent("openTaskModal",{bubbles:!1,detail:{task:n}});document.dispatchEvent(o)}e.stopPropagation()})),t.addEventListener("change",(function(e){n.status=t.checked?o.TaskStatus.Closed:o.TaskStatus.Open;var a=new CustomEvent("editTask",{bubbles:!1,detail:{task:n}});document.dispatchEvent(a),e.stopPropagation()})),a.addEventListener("click",(function(e){var t=new CustomEvent("removeTask",{bubbles:!1,detail:{taskID:n.id}});document.dispatchEvent(t),e.stopPropagation()}))},e}();t.InterfaceManager=r},721:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ModalManager=void 0;var a=function(){function e(){var e=this;this.modalWrapperNode=document.querySelector("#modal-wrapper"),this.modalOverlayNode=this.modalWrapperNode.querySelector(".modal-wrapper__overlay"),this.modalOverlayNode.addEventListener("click",(function(){return e.closeModal()}))}return e.prototype.openModal=function(e){var t=this,a=document.querySelector(e);this.modalWrapperNode.removeAttribute("inert"),this.resetModal();var o=document.importNode(a.content,!0);this.modalWrapperNode.append(o),this.registerCloseButton(),requestAnimationFrame((function(){t.modalWrapperNode.classList.add("modal-wrapper--open")}))},e.prototype.resetModal=function(){var e=this.modalWrapperNode.querySelector(".modal");null==e||e.remove()},e.prototype.closeModal=function(){this.modalWrapperNode.setAttribute("inert",""),this.modalWrapperNode.classList.remove("modal-wrapper--open")},e.prototype.registerCloseButton=function(){var e=this,t=this.modalWrapperNode.querySelector(".modal__close");t&&t.addEventListener("click",(function(){return e.closeModal()}))},e}();t.ModalManager=a},901:(e,t)=>{var a,o;Object.defineProperty(t,"__esModule",{value:!0}),t.statusLabels=t.TaskStatus=t.Task=void 0,function(e){e.Open="Open",e.Closed="Closed"}(o||(o={})),t.TaskStatus=o;var n=((a={})[o.Open]="Открытые",a[o.Closed]="Закрытые",a);t.statusLabels=n;t.Task=function(e,t,a,o,n,r){void 0===n&&(n=new Date),this.id=e,this.title=t,this.description=a,this.status=o,this.createdAt=n,this.dueDate=r}},483:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TaskManager=void 0;var o=a(901),n=function(){function e(){this.tasks=[]}return e.prototype.addTask=function(e){console.log(e),this.tasks.push(e),this.saveToLocalStorage()},e.prototype.editTask=function(e){this.tasks=this.tasks.map((function(t){return t.id===e.id?e:t})),this.saveToLocalStorage()},e.prototype.deleteTask=function(e){this.tasks=this.tasks.filter((function(t){return t.id!==e})),this.saveToLocalStorage()},e.prototype.filterTasks=function(e,t){return this.tasks.filter((function(a){var o=!e||a.title.toLowerCase().includes(e.toLowerCase())||a.description.toLowerCase().includes(e.toLowerCase()),n=!t||t==a.status;return o&&n}))},e.prototype.getTasks=function(){return this.tasks},e.prototype.saveToLocalStorage=function(){console.log(this.tasks),localStorage.setItem("tasks",JSON.stringify(this.tasks))},e.prototype.loadFromLocalStorage=function(){var e=localStorage.getItem("tasks");if(!e)return!1;try{var t=JSON.parse(e);this.validateParsedTasks(t),this.tasks=t.map(this.createTaskFromParsedData)}catch(e){return console.error("Ошибка загрузки данных из localStorage:",e),!1}return!0},e.prototype.validateParsedTasks=function(e){var t=this;if(!Array.isArray(e))throw new Error("Загруженные данные — не массив");e.forEach((function(e){if(!t.isValidTask(e))throw new Error("Неизвестный формат задачи")}))},e.prototype.isValidTask=function(e){return"string"==typeof e.id&&"string"==typeof e.title&&(void 0===e.description||"string"==typeof e.description)&&Object.values(o.TaskStatus).includes(e.status)&&"string"==typeof e.createdAt&&(void 0===e.dueDate||"boolean"==typeof e.dueDate||"string"==typeof e.dueDate)},e.prototype.createTaskFromParsedData=function(e){return new o.Task(e.id,e.title,e.description||"",e.status,new Date(e.createdAt),e.dueDate?new Date(e.dueDate):void 0)},e}();t.TaskManager=n},675:function(e,t,a){var o,n=this&&this.__extends||(o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])},o(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function a(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)});Object.defineProperty(t,"__esModule",{value:!0}),t.TaskModalManager=void 0;var r=a(721),i=a(781),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.openModalNewTask=function(){this.openTaskModal("Добавить задачу")},t.prototype.closeModal=function(){e.prototype.closeModal.call(this),document.removeEventListener("keypress",this.handleKeyPressEvent,!1)},t.prototype.openModalEditTask=function(e){this.openTaskModal("Редактировать задачу",e)},t.prototype.openTaskModal=function(e,t){var a=this;this.handleKeyPressEvent=function(e){return a.handleKeyPress(e)},this.openModal("#template-modal-task"),this.initializeModalElements(e,t),this.setupModalEvents(t)},t.prototype.getModalElements=function(){return{modalTitleElement:document.querySelector(".modal__title"),modalMainButton:document.querySelector("#js-create-new-task-button"),taskTitleElement:document.querySelector("#js-input-task-name"),taskDescriptionElement:document.querySelector("#js-input-task-description"),taskDeadlineToggleElement:document.querySelector("#js-checkbox-deadline"),deadlineInputElement:this.deadlineInputElement=document.querySelector("#js-input-deadline-datetime")}},t.prototype.initializeModalElements=function(e,t){var a=this.getModalElements();a.modalTitleElement.textContent=e,this.setDeadlineDate(new Date,new Date),t&&(this.populateTaskFields(t,a),a.modalMainButton.textContent="Добавить задачу"===e?"Добавить задачу":"Сохранить задачу"),this.modalOverlayNode.addEventListener("transitionend",(function(){a.taskTitleElement.focus()}),!1)},t.prototype.populateTaskFields=function(e,t){t.taskTitleElement.value=e.title,t.taskDescriptionElement.value=e.description,e.dueDate&&(t.taskDeadlineToggleElement.checked=!0,this.toggleDeadlineInput(!0),this.setDeadlineDate(e.dueDate,new Date))},t.prototype.setupModalEvents=function(e){var t=this,a=this.getModalElements();this.handleTaskAction=function(){a.taskTitleElement.value?(t.toggleInputError(a.taskTitleElement,!1),e?(e.title=a.taskTitleElement.value,e.description=a.taskDescriptionElement.value,e.dueDate=a.taskDeadlineToggleElement.checked?(0,i.parseFormattedDateTime)(t.deadlineInputElement.value):void 0,t.dispatchEditTaskEvent(e)):t.dispatchCreateTaskEvent(a.taskTitleElement.value,a.taskDescriptionElement.value,a.taskDeadlineToggleElement.checked?(0,i.parseFormattedDateTime)(t.deadlineInputElement.value):void 0),t.closeModal()):t.toggleInputError(a.taskTitleElement,!0)},a.modalMainButton.addEventListener("click",this.handleTaskAction),a.taskDeadlineToggleElement.addEventListener("change",(function(e){return t.toggleDeadlineInput(e.target.checked)})),document.addEventListener("keypress",this.handleKeyPressEvent,!1)},t.prototype.dispatchEditTaskEvent=function(e){var t=new CustomEvent("editTask",{bubbles:!1,detail:{task:e}});document.dispatchEvent(t)},t.prototype.dispatchCreateTaskEvent=function(e,t,a){var o=new CustomEvent("createTask",{bubbles:!1,detail:{taskTitle:e,taskDescription:t,taskDueDate:a}});document.dispatchEvent(o)},t.prototype.handleKeyPress=function(e){var t=this;e.shiftKey&&"Enter"===e.key&&(this.handleTaskAction(),e.preventDefault(),document.removeEventListener("keypress",(function(e){return t.handleKeyPress(e)}),!1))},t.prototype.toggleDeadlineInput=function(e){this.deadlineInputElement.classList.toggle("hide",!e)},t.prototype.setDeadlineDate=function(e,t){this.deadlineInputElement.min=(0,i.formatDate)(t),this.deadlineInputElement.value=(0,i.formatDate)(e)},t.prototype.toggleInputError=function(e,t){e.classList.toggle("input--error",t),t&&e.focus()},t}(r.ModalManager);t.TaskModalManager=s},781:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isBeforeNow=t.parseFormattedDateTime=t.formatDate=t.relativeTimeFormat=void 0,t.relativeTimeFormat=function(e){for(var t=new Date,a=Math.floor((e.getTime()-t.getTime())/1e3),o=new Intl.RelativeTimeFormat("ru",{numeric:"auto"}),n=[{limit:60,unit:"second"},{limit:3600,unit:"minute"},{limit:86400,unit:"hour"},{limit:2592e3,unit:"day"},{limit:31536e3,unit:"month"}],r=Math.abs(a),i=0;i<n.length;i++){var s=n[i],d=s.limit,l=s.unit;if(r<d){var c=0===i?1:n[i-1].limit,p=Math.floor(r/c);return o.format(a<0?-p:p,l)}}return o.format(a<0?-Math.floor(r/31536e3):Math.floor(r/31536e3),"year")},t.formatDate=function(e){var t=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),o=String(e.getDate()).padStart(2,"0"),n=String(e.getHours()).padStart(2,"0"),r=String(e.getMinutes()).padStart(2,"0");return"".concat(t,"-").concat(a,"-").concat(o,"T").concat(n,":").concat(r)},t.parseFormattedDateTime=function(e){var t=e.split("T"),a=t[0],o=t[1],n=a.split("-").map(Number),r=n[0],i=n[1],s=n[2],d=o.split(":").map(Number),l=d[0],c=d[1];return new Date(r,i-1,s,l,c)},t.isBeforeNow=function(e){return e>new Date}}},t={};function a(o){var n=t[o];if(void 0!==n)return n.exports;var r=t[o]={id:o,exports:{}};return e[o].call(r.exports,r,r.exports,a),r.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.nc=void 0,(()=>{a(273);var e=a(604),t=a(901),o=a(483),n=a(675);new(function(){function a(){this.interfaceManager=new e.InterfaceManager,this.taskManager=new o.TaskManager,this.modalManager=new n.TaskModalManager,this.renderedTasks=[],this.filter={searchValue:"",status:""},this.init()}return a.prototype.init=function(){this.taskManager.loadFromLocalStorage(),this.updateRenderedTasks(),this.bindEvents()},a.prototype.updateRenderedTasks=function(){this.renderedTasks=this.taskManager.filterTasks(this.filter.searchValue,this.filter.status),this.interfaceManager.renderTasks(this.renderedTasks)},a.prototype.bindEvents=function(){var e=this;document.addEventListener("createTask",(function(t){return e.handleCreateTask(t)})),document.addEventListener("editTask",(function(t){return e.handleEditTask(t)})),document.addEventListener("removeTask",(function(t){return e.handleRemoveTask(t)})),document.addEventListener("openTaskModal",(function(t){return e.handleOpenTaskModal(t)})),document.addEventListener("searchInput",(function(t){return e.handleSearch(t)}))},a.prototype.handleCreateTask=function(e){var a=e.detail,o=a.taskTitle,n=a.taskDescription,r=a.taskDueDate,i=new t.Task(Date.now().toString(),o,n,t.TaskStatus.Open,new Date,r);this.taskManager.addTask(i),this.updateRenderedTasks()},a.prototype.handleEditTask=function(e){var t=e.detail.task;this.taskManager.editTask(t),this.updateRenderedTasks()},a.prototype.handleRemoveTask=function(e){this.taskManager.deleteTask(e.detail.taskID),this.updateRenderedTasks()},a.prototype.handleOpenTaskModal=function(e){var t=e.detail.task;t?this.modalManager.openModalEditTask(t):this.modalManager.openModalNewTask()},a.prototype.handleSearch=function(e){this.filter={searchValue:e.detail.searchValue,status:e.detail.status},this.updateRenderedTasks()},a}())})()})();